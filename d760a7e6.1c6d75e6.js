(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{170:function(e,t,a){"use strict";a.r(t),t.default=a.p+"assets/images/\u5bfc\u51fa\u914d\u7f6e-6ce49202163983f5a51840486aa6ac37.png"},171:function(e,t,a){"use strict";a.r(t),t.default=a.p+"assets/images/webpack\u914d\u7f6e-d161efe7fb14c304837eeb7c505d31ed.png"},85:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return s})),a.d(t,"metadata",(function(){return c})),a.d(t,"rightToc",(function(){return o})),a.d(t,"default",(function(){return i}));var n=a(2),r=a(6),b=(a(0),a(97)),s={title:"\u5728React\u9879\u76ee\u4e2d\u4f7f\u7528svg",tags:["react","svg"]},c={permalink:"/blog/2020/11/05/React\u9879\u76ee\u4f7f\u7528svg",editUrl:"https://github.com/jenvyxu/jenvyxu.github.io/blog/2020-11-05-React\u9879\u76ee\u4f7f\u7528svg.md",source:"@site/blog/2020-11-05-React\u9879\u76ee\u4f7f\u7528svg.md",description:"\u4f7f\u7528create-react-app\u521b\u5efa\u4e00\u4e2a\u9879\u76ee\u540e\uff0c\u5982\u4f55\u4f7f\u7528svg\u56fe\u7247",date:"2020-11-05T00:00:00.000Z",tags:[{label:"react",permalink:"/blog/tags/react"},{label:"svg",permalink:"/blog/tags/svg"}],title:"\u5728React\u9879\u76ee\u4e2d\u4f7f\u7528svg",readingTime:.515,truncated:!0,nextItem:{title:"React\u9879\u76ee\u642d\u5efa\u548cwebstorm\u914d\u7f6e",permalink:"/blog/2020/11/04/\u521d\u59cbreact\u9879\u76ee\u548c\u914d\u7f6ewebstorm"}},o=[{value:"\u5bfc\u51fa\u914d\u7f6e\u6587\u4ef6",id:"\u5bfc\u51fa\u914d\u7f6e\u6587\u4ef6",children:[]},{value:"\u5b89\u88c5svg-sprite-loader\u548csvgo-loader",id:"\u5b89\u88c5svg-sprite-loader\u548csvgo-loader",children:[]},{value:"\u914d\u7f6eloader\u9009\u9879",id:"\u914d\u7f6eloader\u9009\u9879",children:[]},{value:"\u4f7f\u7528svg",id:"\u4f7f\u7528svg",children:[]},{value:"\u5982\u4f55require\u4e00\u4e2a\u6587\u4ef6\u5939\u91cc\u9762\u7684\u6240\u6709svg",id:"\u5982\u4f55require\u4e00\u4e2a\u6587\u4ef6\u5939\u91cc\u9762\u7684\u6240\u6709svg",children:[]}],p={rightToc:o};function i(e){var t=e.components,s=Object(r.a)(e,["components"]);return Object(b.b)("wrapper",Object(n.a)({},p,s,{components:t,mdxType:"MDXLayout"}),Object(b.b)("p",null,"\u4f7f\u7528create-react-app\u521b\u5efa\u4e00\u4e2a\u9879\u76ee\u540e\uff0c\u5982\u4f55\u4f7f\u7528svg\u56fe\u7247"),Object(b.b)("h2",{id:"\u5bfc\u51fa\u914d\u7f6e\u6587\u4ef6"},"\u5bfc\u51fa\u914d\u7f6e\u6587\u4ef6"),Object(b.b)("p",null,"\u628a\u6700\u65b0\u7684\u4fee\u6539\u7684\u5185\u5bb9\u63d0\u4ea4\u5230git\u540e\uff0c\u6267\u884c",Object(b.b)("inlineCode",{parentName:"p"},"yarn eject"),"\uff0c \u6210\u529f\u540e\u4f1a\u5728\u9879\u76ee\u7684\u6839\u76ee\u5f55\u4e0b\u9762\u751f\u6210\u4e00\u4e2aconfig\u6587\u4ef6\u5939\uff0c\u91cc\u9762\u7684webpack.config.js\u5c31\u662fwebpack\u7684\u914d\u7f6e\u6587\u4ef6\n",Object(b.b)("img",{alt:"\u5bfc\u51fa\u914d\u7f6e",src:a(170).default})),Object(b.b)("h2",{id:"\u5b89\u88c5svg-sprite-loader\u548csvgo-loader"},"\u5b89\u88c5svg-sprite-loader\u548csvgo-loader"),Object(b.b)("pre",null,Object(b.b)("code",Object(n.a)({parentName:"pre"},{}),"yarn add svgo svgo-loader -D\nyarn add svg-sprite-loader -D\n")),Object(b.b)("p",null,Object(b.b)("inlineCode",{parentName:"p"},"svgo"),"\u662f\u4e00\u4e2asvg\u4f18\u5316\u5668",Object(b.b)("br",{parentName:"p"}),"\n",Object(b.b)("inlineCode",{parentName:"p"},"svg-sprite-loader"),"\u4f5c\u7528\u662f\u628asvg\u56fe\u7247\u6dfb\u52a0\u5230body\u7684svg\u6807\u7b7e\u91cc\u9762"),Object(b.b)("blockquote",null,Object(b.b)("p",{parentName:"blockquote"},Object(b.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/svg/svgo"}),"https://github.com/svg/svgo"),Object(b.b)("br",{parentName:"p"}),"\n",Object(b.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/JetBrains/svg-sprite-loader%3E"}),"https://github.com/JetBrains/svg-sprite-loader>"))),Object(b.b)("h2",{id:"\u914d\u7f6eloader\u9009\u9879"},"\u914d\u7f6eloader\u9009\u9879"),Object(b.b)("p",null,"\u5728\u5bfc\u51fa\u7684",Object(b.b)("inlineCode",{parentName:"p"},"webpack.config.js"),"\u91cc\u9762\u7684",Object(b.b)("inlineCode",{parentName:"p"},"module.rules.oneOf"),"\u6570\u7ec4\u91cc\u9762\u52a0\u5165loader\u7684\u914d\u7f6e"),Object(b.b)("pre",null,Object(b.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),"{\n  test: /\\.svg$/,\n  use: [\n    { loader: 'svg-sprite-loader', options: {} },\n    { loader: 'svgo-loader', options: {} }\n  ]\n},\n")),Object(b.b)("p",null,Object(b.b)("img",{alt:"webpack\u914d\u7f6e",src:a(171).default})),Object(b.b)("h2",{id:"\u4f7f\u7528svg"},"\u4f7f\u7528svg"),Object(b.b)("p",null,"\u5728\u9879\u76ee\u4e2d\u4f7f\u7528svg\u4e0d\u80fd\u7528import\u65b9\u6cd5\u5f15\u5165\uff0c\u56e0\u4e3aimport svg\u4ee3\u7801\u7531\u4e8e\u6ca1\u6709\u88ab\u4f7f\u7528\uff0c\u5728webpack\u6253\u5305\u65f6\u4f1a\u88abtreeshaking\u4f18\u5316\u6389\uff0csvg\u4e0d\u4f1a\u51fa\u73b0\u5728\u9875\u9762\u4e0a\uff0c\u56e0\u6b64\u5efa\u8bae\u4f7f\u7528",Object(b.b)("inlineCode",{parentName:"p"},"require"),"\u7684\u65b9\u5f0f\uff0c",Object(b.b)("strong",{parentName:"p"},Object(b.b)("inlineCode",{parentName:"strong"},"xlinkHref"),"\u7684\u503c\u4e3asvg\u6587\u4ef6\u540d\u52a0\u4e00\u4e2a",Object(b.b)("inlineCode",{parentName:"strong"},"#"),"\u53f7")),Object(b.b)("pre",null,Object(b.b)("code",Object(n.a)({parentName:"pre"},{className:"language-jsx"}),"require('test.svg') // \u63a8\u8350\nimport('test.svg')  // \u4e0d\u63a8\u8350\n\n// \u4f7f\u7528\n<svg className=\"icon\">\n  <use xlinkHref=\"#test\" />\n</svg>\n")),Object(b.b)("h2",{id:"\u5982\u4f55require\u4e00\u4e2a\u6587\u4ef6\u5939\u91cc\u9762\u7684\u6240\u6709svg"},"\u5982\u4f55require\u4e00\u4e2a\u6587\u4ef6\u5939\u91cc\u9762\u7684\u6240\u6709svg"),Object(b.b)("ol",null,Object(b.b)("li",{parentName:"ol"},Object(b.b)("p",{parentName:"li"},"\u5b89\u88c5@types/webpack-env",Object(b.b)("br",{parentName:"p"}),"\n",Object(b.b)("inlineCode",{parentName:"p"},"yarn add -D @types/webpack-env@1.15.1"))),Object(b.b)("li",{parentName:"ol"},Object(b.b)("p",{parentName:"li"},"\u5728\u9700\u8981\u5f15\u5165svg\u7684tsx\u6587\u4ef6\u6dfb\u52a0\u4e0b\u9762\u7684\u4ee3\u7801"))),Object(b.b)("pre",null,Object(b.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),"let importAll = (requireContext: __WebpackModuleApi.RequireContext) => \n  requireContext.keys().forEach(requireContext);\ntry {\n  importAll(require.context('assets/icons', true, /\\.svg$/));\n} catch (error) {\n  console.log(error);\n}\n\n")),Object(b.b)("p",null,Object(b.b)("inlineCode",{parentName:"p"},"assets/icos"),"\u662fsvg\u56fe\u6807\u5b58\u653e\u7684\u4f4d\u7f6e",Object(b.b)("br",{parentName:"p"}),"\n",Object(b.b)("inlineCode",{parentName:"p"},"@types/webpack-env"),"\u7684\u4f5c\u7528\u662f\u63d0\u4f9b",Object(b.b)("inlineCode",{parentName:"p"},"__WebpackModuleApi"),"\u53d8\u91cf"))}i.isMDXComponent=!0}}]);